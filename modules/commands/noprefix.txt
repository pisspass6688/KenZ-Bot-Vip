module.exports.config = {
    name: "chá»­i anya",
    version: "1.0.0",
    hasPermssion: 0,
    credits: "Báº£o An",
    description: "Äá»«ng cÃ³ chá»­i khÃ´ng bá»‹ chá»­i láº¡i thÃ¬ dá»—i",
    commandCategory: "Tá»± Ä‘á»™ng",
    usages: "",
    cooldowns: 2,
    denpendencies: {}
};

module.exports.handleReply = async function({ api, args, Users, event, handleReply }) {
    var name = await Users.getNameUser(event.senderID);
    switch (handleReply.type) {
        case "reply":
            {
                var idad = global.config.ADMINBOT;
                for (let ad of idad) {
                    api.sendMessage({
                        body: "Tin nháº¯n tá»« ğŸ’œ" + name + ":\n" + event.body,
                        mentions: [{
                            id: event.senderID,
                            tag: name
                        }]
                    }, ad, (e, data) => global.client.handleReply.push({
                        name: this.config.name,
                        messageID: data.messageID,
                        messID: event.messageID,
                        author: event.senderID,
                        id: event.threadID,
                        type: "goibot"
                    }))
                }
                break;
            }
        case "goibot":
            {
                api.sendMessage({ body: `${event.body}`, mentions: [{ tag: name, id: event.senderID }] }, handleReply.id, (e, data) => global.client.handleReply.push({
                    name: this.config.name,
                    author: event.senderID,
                    messageID: data.messageID,
                    type: "reply"
                }), handleReply.messID);
                break;
            }
    }
};


module.exports.handleEvent = async({ event, api, Users, Threads }) => {
    var { threadID, messageID, body, senderID } = event;
    if (senderID == global.data.botID) return;

    const moment = require("moment-timezone");
    var time = moment.tz("Asia/Ho_Chi_Minh").format("HH:mm:ss D/MM/YYYY");
    let name = await Users.getNameUser(event.senderID);
    var idbox = event.threadID;
    let uidUser = event.senderID;
    let dataThread = await Threads.getData(event.threadID);
    let threadInfo = dataThread.threadInfo;
    const listAdmin = global.config.ADMINBOT;

    var tl = [
        `ÃŠ ${name}` + ",chá»­i cÃ¡i con cáº·c thÃ­ch Ä‘Ã¡nh nhau Ã ",
        `ÃŠ ${name}` + ",Ä‘Ã¡nh nhau khÃ´ng ?",
        `Con máº¹ ${name}` + ",m chá»­i láº¡i tao nghe cÃ¡i nÃ o",
      `Bá»‘ láº¡i Ä‘Ã¡nh cho con chÃ³ ${name}` + ",m chá»­i ai tháº¿",   
      `M biáº¿t tao lÃ  ai khÃ´ng con chÃ³ ${name}` + ",t lÃ  Ä‘Ã n em cá»§a anh TrÃ  Mi Ä‘Ã³",
      `Chá»­i cÃ¡i c` + "cccccccc",
      `MÃ y báº£o tao giáº£ táº¡o. á»ª thÃ¬ tao giáº£ táº¡o nhÆ°ng cháº¯c cháº¯n má»™t Ä‘iá»u ráº±ng sá»± giáº£ táº¡o cá»§a tao chÆ°a thÃ nh tháº¡o vÃ  khá»‘n náº¡n nhÆ° mÃ y`,
      `Äá»«ng nÃªn cáº¯n sau lÆ°ng ngÆ°á»i khÃ¡c. Bá»Ÿi trá»i mÃ  quáº£ bÃ¡o thÃ¬ dÃ¹ng Äƒn chÃ¡o cÅ©ng gÃ£y rÄƒng`,
      `NgÆ°á»i ta Ä‘á»™i mÅ© báº£o hiá»ƒm Ä‘á»ƒ báº£o vá»‡ nÃ£o. Tháº¿ nhÆ°ng khÃ´ng biáº¿t Ä‘á»©a khÃ´ng cÃ³ nÃ£o Ä‘á»™i mÅ© báº£o hiá»ƒm lÃ m gÃ¬ cho nÃ³ng Ä‘áº§u`,
      `Thá»­ há»i xem vá»Ÿ ká»‹ch báº¡n diá»…n cÃ³ bao nhiÃªu khÃ¡n giáº£ Ä‘á»ƒ báº¡n pháº£i táº­n tÃ¢m váº¥t váº£ vÃ o vai? Äá»ƒ rá»“i ai sáº½ tráº£ cÃ¡t xÃª cho báº¡n mÃ  niá»m Ä‘am mÃª diá»…n xuáº¥t cá»§a báº¡n láº¡i lá»›n Ä‘áº¿n tháº¿?`,
      `TrÃ´ng báº¡n khÃ¡ giá»‘ng bÃºp bÃª Ä‘áº¥y. NhÆ°ng báº¡n Ã  bÃºp bÃª thÃ¬ khÃ´ng cÃ³ nÃ£o mÃ  chá»‰ lÃ  toÃ n nhá»±a dáº»o mÃ  thÃ´i`,
      `Tao ghÃ©t nháº¥t cÃ¡i thá»ƒ loáº¡i nhÃ¬n tao báº±ng báº±ng máº¯t xanh máº¯t Ä‘á» rá»“i chá»‰ trá» sau lÆ°ng. NhÆ°ng hÃ£y nhÃ¬n láº¡i báº£n thÃ¢n Ä‘i liá»‡u mÃ y Ä‘Ã£ báº±ng Ä‘Æ°á»£c táº¡o hay chÆ°a?`,
      `NgÆ°á»i thÃ¬ nhÆ° cÃ¡i cháº­u mÃ  lÃºc nÃ o cÅ©ng nghÄ© mÃ¬nh lÃ  hoa háº­u. Tá»‘t nháº¥t hÃ£y xem láº¡i báº£n thÃ¢n Ä‘á»ƒ khÃ´ng bá»‹ ngÆ°á»i ta chÃª cÆ°á»i.`
    ];
    var rand = tl[Math.floor(Math.random() * tl.length)];
    // Gá»i bot
    var arr = ["bot ngu", "bot cáº·c","bot rÃ¡c",  "bot cÃ¹i", "bot nhÆ° cc", "bot Ã³c", "bot lá»","bot gÃ ","bot ngÃ¡o","bot Ä‘áº§n","bot thÃºi","bot ngÃ¡o"];
    arr.forEach(value => {
        let str = value[0].toUpperCase() + value.slice(1);
    if (body === value.toUpperCase() | body === value | str === body) {
            let nameT = threadInfo.threadName;
            modules = "------ Chá»­i bot ------\n";
            console.log(modules, value + "|", nameT);
            api.sendMessage(rand, threadID, () => {
                var idad = listAdmin;
                for (var idad of listAdmin) {
                    api.sendMessage(`=== Bot Notification ===\n\nğŸ‘¥Box Name: ${nameT}\nğŸ”°ID box: ${idbox}\nğŸ’–Name User: ${name} \nğŸ’•ID User: ${uidUser}\nğŸ•’Time: ${time}\nCÃ¢u chá»­i lÃ : ${value}`,
                        idad, (error, info) =>
                        global.client.handleReply.push({
                            name: this.config.name,
                            author: senderID,
                            messageID: info.messageID,
                            messID: messageID,
                            id: idbox,
                            type: "goibot"
                        })
                    );
                }
            });
        }
    });
}

module.exports.run = async({ event, api }) => {
    return api.sendMessage("( \\_/)                                                                            ( â€¢_â€¢)                                                                            // >ğŸ§                                                             ÄÆ°a nÃ£o cho báº¡n láº¯p vÃ o Ä‘áº§u nÃ¨.\nCÃ³ biáº¿t lÃ  lá»‡nh Noprefix hay khÃ´ng?", event.threadID)
}